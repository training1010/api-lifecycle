<?xml version="1.0" encoding="UTF-8"?>
<exp:Export Version="3.0"
    xmlns:L7p="http://www.layer7tech.com/ws/policy"
    xmlns:exp="http://www.layer7tech.com/ws/policy/export" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <exp:References>
        <EncapsulatedAssertionReference RefType="com.l7tech.console.policy.exporter.EncapsulatedAssertionReference">
            <Name>OTK Require OAuth 2.0 Token</Name>
            <Guid>393bcb93-82ad-4b55-8333-1119f607a560</Guid>
        </EncapsulatedAssertionReference>
        <IncludedPolicyReference
            RefType="com.l7tech.console.policy.exporter.IncludedPolicyReference"
            guid="b7490f28-b23f-4b8e-8e95-7f696e7f18b5" included="true"
            name="Account Plans Fragment" soap="false" type="INCLUDE_FRAGMENT">
            <wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy"
                xmlns:l7="http://ns.l7tech.com/2012/04/api-management" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
                <wsp:All wsp:Usage="Required">
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Policy Fragment: Account Plans Fragment"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="// This fragment is auto generated by the gateway. DO NOT MODIFY"/>
                    </L7p:CommentAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlLZXl9"/>
                        <L7p:VariableToSet stringValue="apiKey"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthY2NvdW50UGxhbk1hcHBpbmdJZH0="/>
                        <L7p:VariableToSet stringValue="accountPlanMappingId"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="ZmFsc2U="/>
                        <L7p:VariableToSet stringValue="apiAuthz"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="Tm90IFNldA=="/>
                        <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                    </L7p:SetVariable>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${accountPlanMappingId}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:Operator operator="EMPTY"/>
                                    <L7p:RightValue stringValue=""/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiAuthzDetails}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="Not Set"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:OneOrMore
                                    wsp:Usage="Required">2016-01-14T11:29:26.289-05:00<wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="77,78,79"/>
                                    <L7p:VariableToSet stringValue="orgIds"/>
                                    </L7p:SetVariable>
                                    <L7p:Split>
                                    <L7p:IgnoreEmptyValues booleanValue="true"/>
                                    <L7p:InputVariable stringValue="orgIds"/>
                                    <L7p:OutputVariable stringValue="orgIdsSplit"/>
                                    </L7p:Split>
                                    <L7p:IndexLookupByItem>
                                    <L7p:MultivaluedVariableName stringValue="orgIdsSplit"/>
                                    <L7p:OutputVariableName stringValue="matchIndex"/>

                                    <L7p:ValueToSearchForVariableName stringValue="accountPlanMappingId"/>
                                    </L7p:IndexLookupByItem>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9fCR7YXBpS2V5fXwke2FjY291bnRQbGFuTWFwcGluZ0lkfXxxdW90YT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="0"/>
                                    <L7p:VariableToSet stringValue="quota"/>
                                    </L7p:SetVariable>
                                    <L7p:HalfAsyncThroughputQuota>
                                    <L7p:CounterName stringValue="${accountPlanMappingId}"/>
                                    <L7p:Enabled booleanValue="false"/>
                                    <L7p:Global booleanValue="true"/>
                                    <L7p:Quota stringValue="${quota}"/>
                                    <L7p:TimeUnit intValue="4"/>
                                    <L7p:CounterStrategy intValue="2"/>
                                    </L7p:HalfAsyncThroughputQuota>
                                    <L7p:RateLimit>
                                    <L7p:CounterName stringValue="${accountPlanMappingId}"/>
                                    <L7p:Enabled booleanValue="false"/>
                                    <L7p:MaxRequestsPerSecond stringValue="10"/>
                                    <L7p:HardLimit booleanValue="true"/>
                                    <L7p:WindowSizeInSeconds stringValue="60"/>
                                    </L7p:RateLimit>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8cmF0ZT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="dHJ1ZQ=="/>
                                    <L7p:VariableToSet stringValue="apiAuthz"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9ZmFpbGVk"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Internal+Plan:81d2a4c3b3ae44f3e0283a81050413a9dcf45dfc"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${accountPlanMappingId}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:Operator operator="EMPTY"/>
                                    <L7p:RightValue stringValue=""/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiAuthzDetails}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="Not Set"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:OneOrMore
                                    wsp:Usage="Required">2016-01-14T11:29:43.434-05:00<wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="80,82"/>
                                    <L7p:VariableToSet stringValue="orgIds"/>
                                    </L7p:SetVariable>
                                    <L7p:Split>
                                    <L7p:IgnoreEmptyValues booleanValue="true"/>
                                    <L7p:InputVariable stringValue="orgIds"/>
                                    <L7p:OutputVariable stringValue="orgIdsSplit"/>
                                    </L7p:Split>
                                    <L7p:IndexLookupByItem>
                                    <L7p:MultivaluedVariableName stringValue="orgIdsSplit"/>
                                    <L7p:OutputVariableName stringValue="matchIndex"/>

                                    <L7p:ValueToSearchForVariableName stringValue="accountPlanMappingId"/>
                                    </L7p:IndexLookupByItem>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9fCR7YXBpS2V5fXwke2FjY291bnRQbGFuTWFwcGluZ0lkfXxxdW90YT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="10000"/>
                                    <L7p:VariableToSet stringValue="quota"/>
                                    </L7p:SetVariable>
                                    <L7p:HalfAsyncThroughputQuota>
                                    <L7p:CounterName stringValue="${accountPlanMappingId}"/>
                                    <L7p:Global booleanValue="true"/>
                                    <L7p:Quota stringValue="${quota}"/>
                                    <L7p:TimeUnit intValue="4"/>
                                    <L7p:CounterStrategy intValue="2"/>
                                    </L7p:HalfAsyncThroughputQuota>
                                    <L7p:RateLimit>
                                    <L7p:CounterName stringValue="${accountPlanMappingId}"/>
                                    <L7p:MaxRequestsPerSecond stringValue="100"/>
                                    <L7p:HardLimit booleanValue="true"/>
                                    <L7p:WindowSizeInSeconds stringValue="60"/>
                                    </L7p:RateLimit>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8cmF0ZT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="dHJ1ZQ=="/>
                                    <L7p:VariableToSet stringValue="apiAuthz"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9ZmFpbGVk"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Partner+Plan:cff5ba2453c621d6001fd8a680c5cf8312fb742f"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${accountPlanMappingId}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:Operator operator="EMPTY"/>
                                    <L7p:RightValue stringValue=""/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiAuthzDetails}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="Not Set"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <L7p:TrueAssertion/>
                            </wsp:OneOrMore>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9fCR7YXBpS2V5fXwke2FjY291bnRQbGFuTWFwcGluZ0lkfXxxdW90YT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="1000"/>
                                    <L7p:VariableToSet stringValue="quota"/>
                                    </L7p:SetVariable>
                                    <L7p:HalfAsyncThroughputQuota>
                                    <L7p:CounterName stringValue="${accountPlanMappingId}"/>
                                    <L7p:Global booleanValue="true"/>
                                    <L7p:Quota stringValue="${quota}"/>
                                    <L7p:TimeUnit intValue="4"/>
                                    <L7p:CounterStrategy intValue="2"/>
                                    </L7p:HalfAsyncThroughputQuota>
                                    <L7p:RateLimit>
                                    <L7p:CounterName stringValue="${accountPlanMappingId}"/>
                                    <L7p:MaxRequestsPerSecond stringValue="10"/>
                                    <L7p:HardLimit booleanValue="true"/>
                                    <L7p:WindowSizeInSeconds stringValue="60"/>
                                    </L7p:RateLimit>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8cmF0ZT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="dHJ1ZQ=="/>
                                    <L7p:VariableToSet stringValue="apiAuthz"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9ZmFpbGVk"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Basic+Plan:8d4c6b42ce6ac7fd7714da09696d64008f0111bf(Default)"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiAuthzDetails}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="Not Set"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:SetVariable>
                                <L7p:Base64Expression stringValue="ZmFsc2U="/>
                                <L7p:VariableToSet stringValue="apiAuthz"/>
                            </L7p:SetVariable>
                            <L7p:SetVariable>
                                <L7p:Base64Expression stringValue="JHthcGlLZXl9fCR7YWNjb3VudFBsYW5NYXBwaW5nSWR9IEFjY291bnRQbGFuTWFwcGluZ0lkIG5vdCBmb3VuZA=="/>
                                <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                            </L7p:SetVariable>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="//accountPlanMappingId not found"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                    </wsp:OneOrMore>
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="Updated on Thu Jan 14 11:29:43 EST 2016"/>
                    </L7p:CommentAssertion>
                    <L7p:ExportVariables>
                        <L7p:ExportedVars stringArrayValue="included">
                            <L7p:item stringValue="apiAuthz"/>
                            <L7p:item stringValue="apiAuthzDetails"/>
                        </L7p:ExportedVars>
                    </L7p:ExportVariables>
                </wsp:All>
            </wsp:Policy>
        </IncludedPolicyReference>
        <IncludedPolicyReference
            RefType="com.l7tech.console.policy.exporter.IncludedPolicyReference"
            guid="a6b613a0-a2b0-4b58-b58a-26eddc702089" included="true"
            name="API Plans Fragment" soap="false" type="INCLUDE_FRAGMENT">
            <wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
                <wsp:All wsp:Usage="Required">
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="// This fragment is auto generated by the gateway. DO NOT MODIFY"/>
                    </L7p:CommentAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlLZXl9"/>
                        <L7p:VariableToSet stringValue="apiKey"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlQbGFufQ=="/>
                        <L7p:VariableToSet stringValue="apiPlan"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlQbGFufQ=="/>
                        <L7p:VariableToSet stringValue="requestApiPlan"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="ZmFsc2U="/>
                        <L7p:VariableToSet stringValue="apiAuthz"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="Tm90IFNldA=="/>
                        <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                    </L7p:SetVariable>
                    <wsp:OneOrMore wsp:Usage="Required" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
                        <L7p:assertionComment xmlns:L7p="http://www.layer7tech.com/ws/policy">
                            <L7p:Properties>
                                <L7p:entry>
                                    <L7p:key>RIGHT.COMMENT</L7p:key>
                                    <L7p:value>// api plans</L7p:value>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:assertionComment>
                        <wsp:All wsp:Usage="Required"
                            xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:l7="http://ns.l7tech.com/2012/04/api-management">
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.id=dbdcd64c94287d76e438301921cb82b79b39208f"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.name=Production+Plan"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.default=false"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.lastUpdated=201305061631.41"/>
                            </L7p:CommentAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${requestApiPlan}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="dbdcd64c94287d76e438301921cb82b79b39208f"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9JHthcGlLZXl9fCR7YXBpUGxhbn18cXVvdGE/"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="100000"/>
                                    <L7p:VariableToSet stringValue="quota"/>
                                    </L7p:SetVariable>
                                    <L7p:HalfAsyncThroughputQuota>
                                    <L7p:CounterName stringValue="${service.oid}-${apiKey}"/>
                                    <L7p:CounterStrategy intValue="2"/>
                                    <L7p:Global booleanValue="true"/>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:Quota stringValue="${quota}"/>
                                    <L7p:TimeUnit intValue="4"/>
                                    </L7p:HalfAsyncThroughputQuota>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8cmF0ZT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:RateLimit>
                                    <L7p:CounterName stringValue="${service.oid}-${apiKey}"/>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:HardLimit booleanValue="true"/>
                                    <L7p:MaxRequestsPerSecond stringValue="1000"/>
                                    <L7p:ShapeRequests booleanValue="false"/>
                                    <L7p:WindowSizeInSeconds stringValue="60"/>
                                    </L7p:RateLimit>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8YXZhaWw/"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:TimeRange>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:ControlDay booleanValue="false"/>
                                    <L7p:ControlTime booleanValue="false"/>
                                    <L7p:EndDayOfWeek intValue="1"/>
                                    <L7p:StartDayOfWeek intValue="1"/>
                                    <L7p:TimeRange timeOfDayRange="included">
                                    <L7p:From timeOfDay="included">
                                    <L7p:Hour intValue="00"/>
                                    <L7p:Minute intValue="00"/>
                                    <L7p:Second intValue="00"/>
                                    </L7p:From>
                                    <L7p:To timeOfDay="included">
                                    <L7p:Hour intValue="00"/>
                                    <L7p:Minute intValue="00"/>
                                    <L7p:Second intValue="00"/>
                                    </L7p:To>
                                    </L7p:TimeRange>
                                    </L7p:TimeRange>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="dHJ1ZQ=="/>
                                    <L7p:VariableToSet stringValue="apiAuthz"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9ZmFpbGVkfA=="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="// Production+Plan"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required"
                            xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:l7="http://ns.l7tech.com/2012/04/api-management">
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.id=977c74afd779357fff22a8be82cade0f2b7b602c"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.name=Test+Plan"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.default=false"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.lastUpdated=201305061631.31"/>
                            </L7p:CommentAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${requestApiPlan}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="977c74afd779357fff22a8be82cade0f2b7b602c"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9JHthcGlLZXl9fCR7YXBpUGxhbn18cXVvdGE/"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="10000"/>
                                    <L7p:VariableToSet stringValue="quota"/>
                                    </L7p:SetVariable>
                                    <L7p:HalfAsyncThroughputQuota>
                                    <L7p:CounterName stringValue="${service.oid}-${apiKey}"/>
                                    <L7p:CounterStrategy intValue="2"/>
                                    <L7p:Global booleanValue="true"/>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:Quota stringValue="${quota}"/>
                                    <L7p:TimeUnit intValue="4"/>
                                    </L7p:HalfAsyncThroughputQuota>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8cmF0ZT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:RateLimit>
                                    <L7p:CounterName stringValue="${service.oid}-${apiKey}"/>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:HardLimit booleanValue="true"/>
                                    <L7p:MaxRequestsPerSecond stringValue="100"/>
                                    <L7p:ShapeRequests booleanValue="false"/>
                                    <L7p:WindowSizeInSeconds stringValue="60"/>
                                    </L7p:RateLimit>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8YXZhaWw/"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:TimeRange>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:ControlDay booleanValue="false"/>
                                    <L7p:ControlTime booleanValue="false"/>
                                    <L7p:EndDayOfWeek intValue="1"/>
                                    <L7p:StartDayOfWeek intValue="1"/>
                                    <L7p:TimeRange timeOfDayRange="included">
                                    <L7p:From timeOfDay="included">
                                    <L7p:Hour intValue="00"/>
                                    <L7p:Minute intValue="00"/>
                                    <L7p:Second intValue="00"/>
                                    </L7p:From>
                                    <L7p:To timeOfDay="included">
                                    <L7p:Hour intValue="00"/>
                                    <L7p:Minute intValue="00"/>
                                    <L7p:Second intValue="00"/>
                                    </L7p:To>
                                    </L7p:TimeRange>
                                    </L7p:TimeRange>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="dHJ1ZQ=="/>
                                    <L7p:VariableToSet stringValue="apiAuthz"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9ZmFpbGVkfA=="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="// Test+Plan"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required"
                            xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:l7="http://ns.l7tech.com/2012/04/api-management">
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.id=1db2437af8b34992f57aedbb22fe27838f42d019"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.name=Sandbox"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.default=true"/>
                            </L7p:CommentAssertion>
                            <L7p:CommentAssertion>
                                <L7p:Comment stringValue="plan.lastUpdated=201305061631.50"/>
                            </L7p:CommentAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${requestApiPlan}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="1db2437af8b34992f57aedbb22fe27838f42d019"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:OneOrMore wsp:Usage="Required">
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9JHthcGlLZXl9fCR7YXBpUGxhbn18cXVvdGE/"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Expression stringValue="1000"/>
                                    <L7p:VariableToSet stringValue="quota"/>
                                    </L7p:SetVariable>
                                    <L7p:HalfAsyncThroughputQuota>
                                    <L7p:CounterName stringValue="${service.oid}-${apiKey}"/>
                                    <L7p:CounterStrategy intValue="2"/>
                                    <L7p:Global booleanValue="true"/>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:Quota stringValue="${quota}"/>
                                    <L7p:TimeUnit intValue="4"/>
                                    </L7p:HalfAsyncThroughputQuota>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8cmF0ZT8="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:RateLimit>
                                    <L7p:CounterName stringValue="${service.oid}-${apiKey}"/>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:HardLimit booleanValue="true"/>
                                    <L7p:MaxRequestsPerSecond stringValue="10"/>
                                    <L7p:ShapeRequests booleanValue="false"/>
                                    <L7p:WindowSizeInSeconds stringValue="60"/>
                                    </L7p:RateLimit>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8YXZhaWw/"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:TimeRange>
                                    <L7p:Enabled booleanValue="true"/>
                                    <L7p:ControlDay booleanValue="false"/>
                                    <L7p:ControlTime booleanValue="false"/>
                                    <L7p:EndDayOfWeek intValue="1"/>
                                    <L7p:StartDayOfWeek intValue="1"/>
                                    <L7p:TimeRange timeOfDayRange="included">
                                    <L7p:From timeOfDay="included">
                                    <L7p:Hour intValue="00"/>
                                    <L7p:Minute intValue="00"/>
                                    <L7p:Second intValue="00"/>
                                    </L7p:From>
                                    <L7p:To timeOfDay="included">
                                    <L7p:Hour intValue="00"/>
                                    <L7p:Minute intValue="00"/>
                                    <L7p:Second intValue="00"/>
                                    </L7p:To>
                                    </L7p:TimeRange>
                                    </L7p:TimeRange>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9b2t8"/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="dHJ1ZQ=="/>
                                    <L7p:VariableToSet stringValue="apiAuthz"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthcGlBdXRoekRldGFpbHN9ZmFpbGVkfA=="/>
                                    <L7p:VariableToSet stringValue="apiAuthzDetails"/>
                                    </L7p:SetVariable>
                                </wsp:All>
                            </wsp:OneOrMore>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="// Sandbox"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                    </wsp:OneOrMore>
                    <L7p:ExportVariables>
                        <L7p:ExportedVars stringArrayValue="included">
                            <L7p:item stringValue="apiAuthz"/>
                            <L7p:item stringValue="apiAuthzDetails"/>
                        </L7p:ExportedVars>
                    </L7p:ExportVariables>
                </wsp:All>
            </wsp:Policy>
        </IncludedPolicyReference>
    </exp:References>
    <wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
        <wsp:All wsp:Usage="Required">
            <L7p:ApiPortalEncassIntegration/>
            <L7p:CommentAssertion>
                <L7p:Comment stringValue="============================"/>
            </L7p:CommentAssertion>
            <L7p:CommentAssertion>
                <L7p:Comment stringValue="= API Portal Integration components below ="/>
            </L7p:CommentAssertion>
            <L7p:CommentAssertion>
                <L7p:Comment stringValue="============================"/>
            </L7p:CommentAssertion>
            <L7p:Encapsulated>
                <L7p:EncapsulatedAssertionConfigGuid stringValue="393bcb93-82ad-4b55-8333-1119f607a560"/>
                <L7p:EncapsulatedAssertionConfigName stringValue="OTK Require OAuth 2.0 Token"/>
                <L7p:Parameters mapValue="included">
                    <L7p:entry>
                        <L7p:key stringValue="cache_lifetime"/>
                        <L7p:value stringValue="0"/>
                    </L7p:entry>
                    <L7p:entry>
                        <L7p:key stringValue="given_access_token"/>
                        <L7p:value stringValue=""/>
                    </L7p:entry>
                    <L7p:entry>
                        <L7p:key stringValue="onetime"/>
                        <L7p:value stringValue="false"/>
                    </L7p:entry>
                    <L7p:entry>
                        <L7p:key stringValue="scope_fail"/>
                        <L7p:value stringValue="false"/>
                    </L7p:entry>
                    <L7p:entry>
                        <L7p:key stringValue="scope_required"/>
                        <L7p:value stringValue=""/>
                    </L7p:entry>
                </L7p:Parameters>
            </L7p:Encapsulated>
            <wsp:All wsp:Usage="Required">
                <L7p:SetVariable>
                    <L7p:AssertionComment assertionComment="included">
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="LEFT.COMMENT"/>
                                <L7p:value stringValue="getRequestedApiResource()"/>
                            </L7p:entry>
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="// capture the API resource requested"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:AssertionComment>
                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAudXJpfQ=="/>
                    <L7p:VariableToSet stringValue="apiResource"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:AssertionComment assertionComment="included">
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="LEFT.COMMENT"/>
                                <L7p:value stringValue="getRequestApiKey()"/>
                            </L7p:entry>
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="// parse API key from request"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:AssertionComment>
                    <L7p:Base64Expression stringValue="JHtzZXNzaW9uLmNsaWVudF9pZH0="/>
                    <L7p:VariableToSet stringValue="lookupApiKey"/>
                </L7p:SetVariable>
                <wsp:All wsp:Usage="Required">
                    <L7p:LookupApiKey>
                        <L7p:ApiKey stringValue="${lookupApiKey}"/>
                        <L7p:ServiceId stringValue="${portal.managed.service.apiId}"/>
                    </L7p:LookupApiKey>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiKeyRecord.found}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="true"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiKeyRecord.service}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="${portal.managed.service.apiId}"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${apiKeyRecord.status}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:RightValue stringValue="active"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="// success - API key found"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required">
                            <L7p:CustomizeErrorResponse>
                                <L7p:Content stringValue="Invalid API Key"/>
                                <L7p:HttpStatus stringValue="400"/>
                            </L7p:CustomizeErrorResponse>
                            <L7p:FalseAssertion/>
                            <L7p:assertionComment>
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="// error - API key not found"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:assertionComment>
                        </wsp:All>
                    </wsp:OneOrMore>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="LEFT.COMMENT"/>
                                <L7p:value stringValue="Step 1 --"/>
                            </L7p:entry>
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="Lookup API Key"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
                <wsp:All wsp:Usage="Required">
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlLZXlSZWNvcmQua2V5fQ=="/>
                        <L7p:VariableToSet stringValue="apiKey"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlLZXlSZWNvcmQucGxhbn0="/>
                        <L7p:VariableToSet stringValue="apiPlan"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHthcGlLZXlSZWNvcmQuYWNjb3VudFBsYW5NYXBwaW5nSWR9"/>
                        <L7p:VariableToSet stringValue="accountPlanMappingId"/>
                    </L7p:SetVariable>
                    <L7p:MessageContextAssertion>
                        <L7p:AssertionComment assertionComment="included">
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="// capture API key and requested method (used by analytics)"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:AssertionComment>
                        <L7p:Mappings mappingInfoArray="included">
                            <L7p:item mappingInfo="included">
                                <L7p:Key stringValue="AUTH_USER"/>
                                <L7p:MappingType mappingType="AUTH_USER"/>
                                <L7p:Value stringValue="(SYSTEM DEFINED)"/>
                            </L7p:item>
                            <L7p:item mappingInfo="included">
                                <L7p:Key stringValue="API_KEY"/>
                                <L7p:MappingType mappingType="CUSTOM_MAPPING"/>
                                <L7p:Value stringValue="${apikey}"/>
                            </L7p:item>
                            <L7p:item mappingInfo="included">
                                <L7p:Key stringValue="API_METHOD"/>
                                <L7p:MappingType mappingType="CUSTOM_MAPPING"/>
                                <L7p:Value stringValue=""/>
                            </L7p:item>
                        </L7p:Mappings>
                    </L7p:MessageContextAssertion>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="LEFT.COMMENT"/>
                                <L7p:value stringValue="Step 2 --"/>
                            </L7p:entry>
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="// Capture API key and API method for metrics"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
                <wsp:All wsp:Usage="Required">
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="The Account Plans Fragment must be manually added here"/>
                    </L7p:CommentAssertion>
                    <L7p:Include>
                        <L7p:PolicyGuid stringValue="b7490f28-b23f-4b8e-8e95-7f696e7f18b5"/>
                    </L7p:Include>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Expression1 stringValue="${apiAuthz}"/>
                            <L7p:Operator operatorNull="null"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                </L7p:item>
                                <L7p:item binary="included">
                                    <L7p:RightValue stringValue="true"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <wsp:All wsp:Usage="Required">
                            <L7p:CustomizeErrorResponse>
                                <L7p:Content stringValueReference="inline"><![CDATA[Account plan limit exceeded

Reason: ${apiAuthzDetails}]]></L7p:Content>
                                <L7p:ExtraHeaders nameValuePairArray="included"/>
                            </L7p:CustomizeErrorResponse>
                            <L7p:FalseAssertion/>
                        </wsp:All>
                    </wsp:OneOrMore>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="LEFT.COMMENT"/>
                                <L7p:value stringValue="Step 3 --"/>
                            </L7p:entry>
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="// Enforce Account Plan restriction"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
                <wsp:All wsp:Usage="Required">
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="The API Plans Fragment must be manually added here"/>
                    </L7p:CommentAssertion>
                    <L7p:Include>
                        <L7p:PolicyGuid stringValue="a6b613a0-a2b0-4b58-b58a-26eddc702089"/>
                    </L7p:Include>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Expression1 stringValue="${apiAuthz}"/>
                            <L7p:Operator operatorNull="null"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                </L7p:item>
                                <L7p:item binary="included">
                                    <L7p:RightValue stringValue="true"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <wsp:All wsp:Usage="Required">
                            <L7p:CustomizeErrorResponse>
                                <L7p:Content stringValueReference="inline"><![CDATA[API plan limit exceeded

Reason: ${apiAuthzDetails}]]></L7p:Content>
                            </L7p:CustomizeErrorResponse>
                            <L7p:FalseAssertion/>
                        </wsp:All>
                    </wsp:OneOrMore>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="LEFT.COMMENT"/>
                                <L7p:value stringValue="Step 4 --"/>
                            </L7p:entry>
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="// Enforce API Plan restriction"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
            </wsp:All>
            <L7p:CommentAssertion>
                <L7p:Comment stringValue="==========================="/>
            </L7p:CommentAssertion>
            <L7p:CommentAssertion>
                <L7p:Comment stringValue="= The rest of the service policy follows ... ="/>
            </L7p:CommentAssertion>
            <L7p:CommentAssertion>
                <L7p:Comment stringValue="==========================="/>
            </L7p:CommentAssertion>
        </wsp:All>
    </wsp:Policy>
</exp:Export>
